旨在代码层规避空引用异常（NPE），通常声明的变量都为非空的；若需声明可空变量，用**类型?**形式（如：String?、Int?等）声明可空变量

可能引发NPE的原因：

* 主动调用threw NullPointerException\(\)
* 使用**!!**操作符
* 数据初始化不一致
  * 传递一个在构造函数中出现的未初始化的this，并在其他地方使用
  * 在超类的构造函数中调用一个**open**成员；在子类中未初始化改成员就使用
* java互操作

#### 安全调用

使用**?.**操作符可以实现安全的调用，形如

`var a:Int?=null`

`a?.length`

表示a若非空，则调用a.length，否则返回null，此表达式返回类型为Int?

> 在链式调用中很有用，student?.subject?.teacher?.name，任一属性为空，则返回null

配合let，可只对非空数值进行操作。**?.**还可用于左侧表达式，此时若左侧表达式为空，则右侧表达式不会执行（计算）

#### Elvis操作符

使用**?:**操作符表示左侧值若非空，则使用左值，否则使用右值。当且仅当左值为空，才计算右值

> threw和return都可用于右值，

#### !!操作符

**!!**读作非空断言运算符，可将任何值转换为非空类型，若为空则抛出异常（NPE）

#### 安全类型转换

**as?**操作符用于安全类型转换，若类型转换失败，则返回null；而**as**转换失败时，则是抛出异常（ClassCatException）

> 可空集合用filterNotNull过滤null元素



